<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Biniyog | My Investments</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:#0f172a;
  color:#fff;
}
header{
  background:#020617;
  padding:15px;
  text-align:center;
  font-size:20px;
  font-weight:bold;
}
.container{
  padding:15px;
}
.card{
  background:#020617;
  padding:15px;
  border-radius:12px;
  margin-bottom:15px;
  box-shadow:0 0 10px rgba(0,0,0,0.5);
}
.row{
  display:flex;
  justify-content:space-between;
  margin-bottom:6px;
  font-size:14px;
}
.status{
  padding:4px 10px;
  border-radius:20px;
  font-size:12px;
  font-weight:bold;
}
.active{
  background:#22c55e;
  color:#000;
}
.completed{
  background:#ef4444;
  color:#fff;
}
.back{
  display:block;
  text-align:center;
  background:#2563eb;
  padding:12px;
  border-radius:10px;
  text-decoration:none;
  color:#fff;
  margin-top:15px;
}
</style>
</head>

<body>

<header>
üìÇ My Investments
</header>

<div class="container" id="investmentList">
<!-- Investments will load here -->
</div>

<a href="dashboard.html" class="back">‚¨Ö Dashboard ‡¶è ‡¶´‡¶ø‡¶∞‡ßá ‡¶Ø‡¶æ‡¶ì</a>

<script>
/* =====================
   LOGIN CHECK
===================== */
const user = localStorage.getItem("loggedInUser");
if(!user){
  location.href="index.html";
}

/* =====================
   LOAD INVESTMENTS
===================== */
let investments = JSON.parse(localStorage.getItem("investments")) || [];
let container = document.getElementById("investmentList");

let found = false;
let now = Date.now();

investments.forEach(inv=>{
  if(inv.user !== user) return;

  found = true;

  let daysPassed = Math.floor((now - inv.start) / (24*60*60*1000));
  let runningDays = Math.min(daysPassed, inv.days);
  let status = daysPassed >= inv.days ? "completed" : "active";

  let card = document.createElement("div");
  card.className = "card";

  card.innerHTML = `
    <div class="row"><strong>‡¶™‡ßç‡¶≤‡ßç‡¶Ø‡¶æ‡¶®</strong><span>${inv.name}</span></div>
    <div class="row"><strong>‡¶á‡¶®‡¶≠‡ßá‡¶∏‡ßç‡¶ü</strong><span>‡ß≥ ${inv.amount}</span></div>
    <div class="row"><strong>‡¶¶‡ßà‡¶®‡¶ø‡¶ï ‡¶Ü‡ßü</strong><span>‡ß≥ ${inv.daily}</span></div>
    <div class="row"><strong>‡¶ö‡¶≤‡¶õ‡ßá</strong><span>${runningDays} / ${inv.days} ‡¶¶‡¶ø‡¶®</span></div>
    <div class="row"><strong>‡¶Æ‡ßã‡¶ü ‡¶Ü‡ßü</strong><span>‡ß≥ ${inv.earned}</span></div>
    <div class="row">
      <strong>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶∏</strong>
      <span class="status ${status}">
        ${status === "active" ? "ACTIVE" : "COMPLETED"}
      </span>
    </div>
  `;

  container.appendChild(card);
});

if(!found){
  container.innerHTML = `
    <div class="card" style="text-align:center;">
      ‚ùå ‡¶è‡¶ñ‡¶®‡ßã ‡¶ï‡ßã‡¶®‡ßã ‡¶á‡¶®‡¶≠‡ßá‡¶∏‡ßç‡¶ü‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á
    </div>
  `;
}
</script>

</body>
</html>
