<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Transaction History</title>

<style>
body{margin:0;font-family:Arial;background:#020617;color:#fff}
.header{padding:15px;font-size:20px}
.card{
  margin:12px;
  background:#020617;
  padding:12px;
  border-radius:10px;
}
.pending{color:#facc15}
.approved{color:#22c55e}
.rejected{color:#f87171}
</style>
</head>
<body>

<div class="header">ðŸ”„ Transaction History</div>
<div id="list"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";
import { getFirestore, collection, query, where, getDocs } 
from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const app=initializeApp({apiKey:"AIzaSyBFsTzlRPoWHVXEHbKrPdwxslxZGa7Kqfw",projectId:"biniyog-95d00"});
const auth=getAuth(app);
const db=getFirestore(app);
const list=document.getElementById("list");

onAuthStateChanged(auth,async(user)=>{
  if(!user){location.href="index.html";return;}
  const q=query(collection(db,"withdraw_requests"),where("uid","==",user.uid));
  const snap=await getDocs(q);
  snap.forEach(d=>{
    const r=d.data();
    list.innerHTML+=`
      <div class="card">
        Withdraw à§³${r.amount}<br>
        ${r.method}<br>
        <span class="${r.status}">${r.status}</span>
      </div>`;
  });
});
</script>
</body>
</html>
